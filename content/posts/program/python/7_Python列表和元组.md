---
title: "Python中的列表和元组"
date: 2023-01-15T17:52:52+08:00
draft: false
description: "python 编程笔记"
lightgallery: true
tags: [python]
categories: [python]
---

> 本文采用[知识共享署名 4.0 国际许可协议](http://creativecommons.org/licenses/by/4.0/)进行许可，转载时请注明原文链接，图片在使用时请保留全部内容，可适当缩放并在引用处附上图片所在的文章链接。


<!-- TOC -->

- [1. 列表和元组](#1-%E5%88%97%E8%A1%A8%E5%92%8C%E5%85%83%E7%BB%84)
- [2. Python 中的列表和元组都支持负数索引](#2-python-%E4%B8%AD%E7%9A%84%E5%88%97%E8%A1%A8%E5%92%8C%E5%85%83%E7%BB%84%E9%83%BD%E6%94%AF%E6%8C%81%E8%B4%9F%E6%95%B0%E7%B4%A2%E5%BC%95)
- [3. 列表和元组都支持切片操作](#3-%E5%88%97%E8%A1%A8%E5%92%8C%E5%85%83%E7%BB%84%E9%83%BD%E6%94%AF%E6%8C%81%E5%88%87%E7%89%87%E6%93%8D%E4%BD%9C)
- [4. 列表和元组都**可以随意嵌套**](#4-%E5%88%97%E8%A1%A8%E5%92%8C%E5%85%83%E7%BB%84%E9%83%BD%E5%8F%AF%E4%BB%A5%E9%9A%8F%E6%84%8F%E5%B5%8C%E5%A5%97)
- [5. 两者也可以通过 list 和 tuple 函数相互转换](#5-%E4%B8%A4%E8%80%85%E4%B9%9F%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87-list-%E5%92%8C-tuple-%E5%87%BD%E6%95%B0%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2)
- [6. 列表和元组常用的内置函数](#6-%E5%88%97%E8%A1%A8%E5%92%8C%E5%85%83%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9A%84%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0)
- [7. 列表和元组存储方式的差异](#7-%E5%88%97%E8%A1%A8%E5%92%8C%E5%85%83%E7%BB%84%E5%AD%98%E5%82%A8%E6%96%B9%E5%BC%8F%E7%9A%84%E5%B7%AE%E5%BC%82)
- [8. 列表和元组的性能](#8-%E5%88%97%E8%A1%A8%E5%92%8C%E5%85%83%E7%BB%84%E7%9A%84%E6%80%A7%E8%83%BD)
- [9. 列表和元组的使用场景](#9-%E5%88%97%E8%A1%A8%E5%92%8C%E5%85%83%E7%BB%84%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF)

<!-- /TOC -->

## 1. 列表和元组

相同点：

- 列表和元组，都是**一个可以放置任意数据类型的有序集合**。

不同点：

- **列表是动态的**，长度大小不固定，可以随意地增加、删减或者改变元素（mutable）。
- **而元组是静态的**，长度大小固定，无法增加删减或者**改变**（immutable）。



```python
l = [1, 2, 3, 4]
l[3] = 40 # 和很多语言类似，python 中索引同样从 0 开始，l[3] 表示访问列表的第四个元素
l
[1, 2, 3, 40]

tup = (1, 2, 3, 4)
tup[3] = 40
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'tuple' object does not support item assignment
```



想对已有的元组做任何"改变“ 只能创建新的元组，对于列表来说，由于其是动态的，我们只需简单地在列表末尾，加入对应元素就可以了。

```python
tup = (1, 2, 3, 4)
new_tup = tup + (5, ) # 创建新的元组 new_tup，并依次填充原元组的值
new _tup
(1, 2, 3, 4, 5)

l = [1, 2, 3, 4]
l.append(5) # 添加元素 5 到原列表的末尾
l
[1, 2, 3, 4, 5]
```



## 2. Python 中的列表和元组都支持负数索引

**Python 中的列表和元组都支持负数索引**，-1 表示最后一个元素，-2 表示倒数第二个元素。



## 3. 列表和元组都支持切片操作

```python
l = [1, 2, 3, 4]
l[1:3] # 返回列表中索引从 1 到 2 的子列表
[2, 3]

tup = (1, 2, 3, 4)
tup[1:3] # 返回元组中索引从 1 到 2 的子元组
(2, 3)
```

## 4. 列表和元组都**可以随意嵌套**

```python
l = [[1, 2, 3], [4, 5]] # 列表的每一个元素也是一个列表

tup = ((1, 2, 3), (4, 5, 6)) # 元组的每一个元素也是一元组
```



## 5. 两者也可以通过 list() 和 tuple() 函数相互转换

```python
list((1, 2, 3))
[1, 2, 3]

tuple([1, 2, 3])
(1, 2, 3)
```



## 6. 列表和元组常用的内置函数

- count(item) 表示统计列表 / 元组中 item 出现的次数。
- index(item) 表示返回列表 / 元组中 item 第一次出现的索引。
- list.reverse() 和 list.sort() 分别表示原地倒转列表和排序（注意，元组没有内置的这两个函数)。
- reversed() 和 sorted() 同样表示对列表 / 元组进行倒转和排序，但是会返回一个倒转后或者排好序的新的列表 / 元组。

```python
l = [3, 2, 3, 7, 8, 1]
l.count(3)
2
l.index(7)
3
l.reverse()
l
[1, 8, 7, 3, 2, 3]
l.sort()
l
[1, 2, 3, 3, 7, 8]

tup = (3, 2, 3, 7, 8, 1)
tup.count(3)
2
tup.index(7)
3
list(reversed(tup))
[1, 8, 7, 3, 2, 3]
sorted(tup)
[1, 2, 3, 3, 7, 8]
```



## 7. 列表和元组存储方式的差异

列表的存储空间略大于元组。

列表是动态的、可变的，它需要存储指针，来指向对应的元素，为了减小每次增加 / 删减操作时空间分配的开销，Python 每次分配空间时都会额外多分配一些，这样的机制（over-allocating）保证了其操作的高效性：增加 / 删除的时间复杂度均为 O(1)。。元组长度大小固定，元素不可变，所以存储空间固定。

## 8. 列表和元组的性能

列表的性能略逊于元组。

## 9. 列表和元组的使用场景

**1.** 如果存储的数据和数量不变，比如你有一个函数，需要返回的是一个地点的经纬度，然后直接传给前端渲染，那么肯定选用元组更合适。

```python
def get_location():
    .....
    return (longitude, latitude)
```

**2.** 如果存储的数据或数量是可变的，比如社交平台上的一个日志功能，是统计一个用户在一周之内看了哪些用户的帖子，那么则用列表更合适。

```python
viewer_owner_id_list = [] # 里面的每个元素记录了这个 viewer 一周内看过的所有 owner 的 id
records = queryDB(viewer_id) # 索引数据库，拿到某个 viewer 一周内的日志
for record in records:
    viewer_owner_id_list.append(record.id)
```
